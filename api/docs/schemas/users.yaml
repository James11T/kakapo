components:
  user:
    type: object
    properties:
      id:
        $ref: "./generic.yaml#/components/uuid"
      username:
        type: string
        maxLength: 32
        example: johndoe
      displayName:
        type: string
        maxLength: 32
        example: John Doe
      avatar:
        type:
          - string
          - null
        format: uri
        maxLength: 255
        example: https://example.com/avatar.jpg
      about:
        type: string
        maxLength: 2000
        example: Lorem ipsum dolor sit amet, consectetur adipiscing elit.
      registeredAt:
        $ref: "./generic.yaml#/components/date"

  extendedUser:
    allOf:
      - $ref: "#/components/user"
      - type: object
        properties:
          email:
            $ref: "./generic.yaml#/components/email"
          emailVerified:
            type: boolean
            example: true

  userNotFoundResponse:
    type: object
    title: User not found
    properties:
      error:
        type: string
        const: USER_NOT_FOUND
      message:
        type: string
        const: No user was found that matches the given criteria

  createUserSuccessResponse:
    type: object
    title: User created
    properties:
      id:
        $ref: "./generic.yaml#/components/uuid"

  usernameReservedResponse:
    type: object
    title: Username reserved
    properties:
      error:
        type: string
        const: USERNAME_RESERVED
      message:
        type: string
        const: The username provided is taken or is reserved

  emailAlreadyInUseResponse:
    type: object
    title: Email reserved
    properties:
      error:
        type: string
        const: EMAIL_RESERVED
      message:
        type: string
        const: The email provided is already in use

  usernameAvailabilityResponse:
    type: object
    title: Username availability
    properties:
      available:
        type: boolean
        example: true

  usernamePathProperty:
    name: username
    in: path
    description: Username of the user to perform the operation on.
    required: true
    schema:
      type: string
      maxLength: 32

  createUserBody:
    type: object
    properties:
      email:
        $ref: "./generic.yaml#/components/email"
      username:
        type: string
        example: johnsmith
        maxLength: 32
      password:
        $ref: "./generic.yaml#/components/password"
